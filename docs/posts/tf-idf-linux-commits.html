<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TF-IDF linux commits | Rahul Vishwakarma Blog</title>
    <link rel="stylesheet" type="text/css" href="../styles.css" media="screen" />
</head>
<body>
<header>
    <nav>
        <a href="/index.html" aria-label="Go back to the homepage">‚Üê Back</a>
        <a href="https://danluu.com/linux-devs-say/" target="_blank" rel="noopener noreferrer">
            View Original
        </a>
    </nav>
</header>

<main>
    <article>
        <h1>TF-IDF linux commits</h1>
        <section>
            
            <div id="readability-page-1" class="page"><div> <p>I was curious what different people worked on in Linux, so I tried grabbing data from the current git repository to see if I could pull that out of commit message data. This doesn&#39;t include history from before they switched to git, so it only goes back to 2005, but that&#39;s still a decent chunk of history.</p> <p>Here&#39;s a list of the most commonly used words (in commit messages), by the top four most frequent committers, with users ordered by number of commits.</p>  <table> <thead> <tr> <th>User</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th> </tr> </thead> <tbody> <tr> <td>viro</td> <td>to</td> <td>in</td> <td>of</td> <td>and</td> <td>the</td> </tr> <tr> <td>tiwai</td> <td>alsa</td> <td>the</td> <td>-</td> <td>for</td> <td>to</td> </tr> <tr> <td>broonie</td> <td>the</td> <td>to</td> <td>asoc</td> <td>for</td> <td>a</td> </tr> <tr> <td>davem</td> <td>the</td> <td>to</td> <td>in</td> <td>and</td> <td>sparc64</td> </tr> </tbody> </table>  <p>There are a number of standard techniques for dealing with this. One is to explicitly filter out &#34;stop words&#34;, common words that we don&#39;t care about. Unfortunately, that doesn&#39;t work well with this dataset without manual intervention. Standard stop-word lists are going to miss things like <code>Signed-off-by</code> and <code>cc</code>, which are pretty uninteresting. We can generate a custom list of stop words using some threshold for common words in commit messages, but any threshold high enough to catch all of the noise is also going to catch commonly used but interesting terms like <code>null</code> and <code>driver</code>.</p> <p>Luckily, it only takes about a minute to do by hand. After doing that, the result is that many of the top words are the same for different committers. I won&#39;t reproduce the table of top words by committer because it&#39;s just many of the same words repeated many times. Instead, here&#39;s the table of the top words (ranked by number of commit messages that use the word, not raw count), with stop words removed, which has the same data without the extra noise of being broken up by committer.</p> <table> <thead> <tr> <th>Word</th> <th>Count</th> </tr> </thead> <tbody> <tr> <td>driver</td> <td>49442</td> </tr> <tr> <td>support</td> <td>43540</td> </tr> <tr> <td>function</td> <td>43116</td> </tr> <tr> <td>device</td> <td>32915</td> </tr> <tr> <td>arm</td> <td>28548</td> </tr> <tr> <td>error</td> <td>28297</td> </tr> <tr> <td>kernel</td> <td>23132</td> </tr> <tr> <td>struct</td> <td>18667</td> </tr> <tr> <td>warning</td> <td>17053</td> </tr> <tr> <td>memory</td> <td>16753</td> </tr> <tr> <td>update</td> <td>16088</td> </tr> <tr> <td>bit</td> <td>15793</td> </tr> <tr> <td>usb</td> <td>14906</td> </tr> <tr> <td>bug</td> <td>14873</td> </tr> <tr> <td>register</td> <td>14547</td> </tr> <tr> <td>avoid</td> <td>14302</td> </tr> <tr> <td>pointer</td> <td>13440</td> </tr> <tr> <td>problem</td> <td>13201</td> </tr> <tr> <td>x86</td> <td>12717</td> </tr> <tr> <td>address</td> <td>12095</td> </tr> <tr> <td>null</td> <td>11555</td> </tr> <tr> <td>cpu</td> <td>11545</td> </tr> <tr> <td>core</td> <td>11038</td> </tr> <tr> <td>user</td> <td>11038</td> </tr> <tr> <td>media</td> <td>10857</td> </tr> <tr> <td>build</td> <td>10830</td> </tr> <tr> <td>missing</td> <td>10508</td> </tr> <tr> <td>path</td> <td>10334</td> </tr> <tr> <td>hardware</td> <td>10316</td> </tr> </tbody> </table>  <p>That something else could be penalizing more common words without eliminating them entirely. A standard metric to normalize by is the inverse document frequency (IDF), <code>log(# of messages / # of messages with word)</code>. So instead of ordering by term count or term frequency, let&#39;s try ordering by <code>(term frequency) * log(# of messages / # of messages with word)</code>, which is commonly called TF-IDF. This gives us words that one person used that aren&#39;t commonly used by other people.</p> <p>Here&#39;s a list of the top 40 linux committers and their most commonly used words, according to TF-IDF.</p> <table> <thead> <tr> <th>User</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th> </tr> </thead> <tbody> <tr> <td>viro</td> <td>switch</td> <td>annotations</td> <td>patch</td> <td>of</td> <td>endianness</td> </tr> <tr> <td>tiwai</td> <td>alsa</td> <td>hda</td> <td>codec</td> <td>codecs</td> <td>hda-codec</td> </tr> <tr> <td>broonie</td> <td>asoc</td> <td>regmap</td> <td>mfd</td> <td>regulator</td> <td>wm8994</td> </tr> <tr> <td>davem</td> <td>sparc64</td> <td>sparc</td> <td>we</td> <td>kill</td> <td>fix</td> </tr> <tr> <td>gregkh</td> <td>cc</td> <td>staging</td> <td>usb</td> <td>remove</td> <td>hank</td> </tr> <tr> <td>mchehab</td> <td>v4l/dvb</td> <td>media</td> <td>at</td> <td>were</td> <td>em28xx</td> </tr> <tr> <td>tglx</td> <td>x86</td> <td>genirq</td> <td>irq</td> <td>prepare</td> <td>shared</td> </tr> <tr> <td>hsweeten</td> <td>comedi</td> <td>staging</td> <td>tidy</td> <td>remove</td> <td>subdevice</td> </tr> <tr> <td>mingo</td> <td>x86</td> <td>sched</td> <td>zijlstra</td> <td>melo</td> <td>peter</td> </tr> <tr> <td>joe</td> <td>unnecessary</td> <td>checkpatch</td> <td>convert</td> <td>pr_</td> <td>use</td> </tr> <tr> <td>tj</td> <td>cgroup</td> <td>doesnt</td> <td>which</td> <td>it</td> <td>workqueue</td> </tr> <tr> <td>lethal</td> <td>sh</td> <td>up</td> <td>off</td> <td>sh64</td> <td>kill</td> </tr> <tr> <td>axel.lin</td> <td>regulator</td> <td>asoc</td> <td>convert</td> <td>thus</td> <td>use</td> </tr> <tr> <td>hch</td> <td>xfs</td> <td>sgi-pv</td> <td>sgi-modid</td> <td>remove</td> <td>we</td> </tr> <tr> <td>sachin.kamat</td> <td>redundant</td> <td>remove</td> <td>simpler</td> <td>null</td> <td>of_match_ptr</td> </tr> <tr> <td>bzolnier</td> <td>ide</td> <td>shtylyov</td> <td>sergei</td> <td>acked-by</td> <td>caused</td> </tr> <tr> <td>alan</td> <td>tty</td> <td>gma500</td> <td>we</td> <td>up</td> <td>et131x</td> </tr> <tr> <td>ralf</td> <td>mips</td> <td>fix</td> <td>build</td> <td>ip27</td> <td>of</td> </tr> <tr> <td>johannes.berg</td> <td>mac80211</td> <td>iwlwifi</td> <td>it</td> <td>cfg80211</td> <td>iwlagn</td> </tr> <tr> <td>trond.myklebust</td> <td>nfs</td> <td>nfsv4</td> <td>sunrpc</td> <td>nfsv41</td> <td>ensure</td> </tr> <tr> <td>shemminger</td> <td>sky2</td> <td>net_device_ops</td> <td>skge</td> <td>convert</td> <td>bridge</td> </tr> <tr> <td>bunk</td> <td>static</td> <td>needlessly</td> <td>global</td> <td>patch</td> <td>make</td> </tr> <tr> <td>hartleys</td> <td>comedi</td> <td>staging</td> <td>remove</td> <td>subdevice</td> <td>driver</td> </tr> <tr> <td>jg1.han</td> <td>simpler</td> <td>device_release</td> <td>unnecessary</td> <td>clears</td> <td>thus</td> </tr> <tr> <td>akpm</td> <td>cc</td> <td>warning</td> <td>fix</td> <td>function</td> <td>patch</td> </tr> <tr> <td>rmk+kernel</td> <td>arm</td> <td>acked-by</td> <td>rather</td> <td>tested-by</td> <td>we</td> </tr> <tr> <td>daniel.vetter</td> <td>drm/i915</td> <td>reviewed-by</td> <td>v2</td> <td>wilson</td> <td>vetter</td> </tr> <tr> <td>bskeggs</td> <td>drm/nouveau</td> <td>drm/nv50</td> <td>drm/nvd0/disp</td> <td>on</td> <td>chipsets</td> </tr> <tr> <td>acme</td> <td>galbraith</td> <td>perf</td> <td>weisbecker</td> <td>eranian</td> <td>stephane</td> </tr> <tr> <td>khali</td> <td>hwmon</td> <td>i2c</td> <td>driver</td> <td>drivers</td> <td>so</td> </tr> <tr> <td>torvalds</td> <td>linux</td> <td>commit</td> <td>just</td> <td>revert</td> <td>cc</td> </tr> <tr> <td>chris</td> <td>drm/i915</td> <td>we</td> <td>gpu</td> <td>bugzilla</td> <td>whilst</td> </tr> <tr> <td>neilb</td> <td>md</td> <td>array</td> <td>so</td> <td>that</td> <td>we</td> </tr> <tr> <td>lars</td> <td>asoc</td> <td>driver</td> <td>iio</td> <td>dapm</td> <td>of</td> </tr> <tr> <td>kaber</td> <td>netfilter</td> <td>conntrack</td> <td>net_sched</td> <td>nf_conntrack</td> <td>fix</td> </tr> <tr> <td>dhowells</td> <td>keys</td> <td>rather</td> <td>key</td> <td>that</td> <td>uapi</td> </tr> <tr> <td>heiko.carstens</td> <td>s390</td> <td>since</td> <td>call</td> <td>of</td> <td>fix</td> </tr> <tr> <td>ebiederm</td> <td>namespace</td> <td>userns</td> <td>hallyn</td> <td>serge</td> <td>sysctl</td> </tr> <tr> <td>hverkuil</td> <td>v4l/dvb</td> <td>ivtv</td> <td>media</td> <td>v4l2</td> <td>convert</td> </tr> </tbody> </table>  <p>We can also use this to see the distribution of what people talk about in their commit messages vs. how often they commit.</p> <p><img src="https://danluu.com/images/linux-devs-say/null-percentile.png" alt="Who cares about null? These people!"/></p> <p>This graph has people on the x-axis and relative word usage (ranked by TF-IDF) y-axis. On the x-axis, the most frequent committers on the left and least frequent on the right. On the y-axis, points are higher up if that committer used the word <code>null</code> more frequently, and lower if the person used the word <code>null</code> less frequently.</p> <p><img src="https://danluu.com/images/linux-devs-say/posix-percentile.png" alt="Who cares about POSIX? Almost nobody!"/></p> <p>Relatively, almost no one works on <code>POSIX</code> compliance. You can actually count the individual people who mentioned <code>POSIX</code> in commit messages.</p> <p>This is the point of the blog post where you might expect some kind of summary, or at least a vague point. Sorry. No such luck. I just did this because TF-IDF is one of a zillion concepts presented in the <a href="https://www.coursera.org/course/mmds">Mining Massive Data Sets</a> course running now, and I knew it wouldn&#39;t really stick unless I wrote some code.</p> <p>If you really must have a conclusion, TF-IDF is sometimes useful and incredibly easy to apply. You should use it when you should use it (when you want to see what words distinguish different documents/people from each other) and you shouldn&#39;t use it when you shouldn&#39;t use it (when you want to see what&#39;s common to documents/people). The end.</p> <p><small> I&#39;m experimenting with blogging more by spending less time per post and just spewing stuff out in 30-90 minute sitting. Please <a href="https://twitter.com/danluu">let me know</a> if something is unclear or just plain wrong. Seriously. I went way over time on this one, but that&#39;s mostly because argh data and tables and bugs in Julia, not because of proofreading. I&#39;m sure there are bugs!</small></p> <p>Thanks to Leah Hanson for finding a bunch of writing bugs in this post and to Zack Maril for a conversation on how to maybe display change over time in the future. </p>  </div></div>
        </section>
    </article>
</main>
</body>
</html>
