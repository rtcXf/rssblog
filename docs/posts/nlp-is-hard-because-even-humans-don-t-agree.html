<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NLP is Hard Because Even Humans Don&#39;t Agree | Rahul Vishwakarma Blog</title>
    <link rel="stylesheet" type="text/css" href="../styles.css" media="screen" />
</head>
<body>
<header>
    <nav>
        <a href="/index.html" aria-label="Go back to the homepage">â† Back</a>
        <a href="https://blog.boot.dev/misc/building-an-nlp-engine-is-hard-but-not-as-hard-as-defining-terms/" target="_blank" rel="noopener noreferrer">
            View Original
        </a>
    </nav>
</header>

<main>
    <article>
        <h1>NLP is Hard Because Even Humans Don&#39;t Agree</h1>
        <section>
            
            <div id="readability-page-1" class="page"><div>
           <p>In my full-time role at <a href="https://www.nuvi.com/blog/strategic-decision-making-nuvis-all-new-language-engine">Nuvi</a>, Iâ€™ve been lucky enough to work on a team where weâ€™re able to push the boundaries in the natural language processing field. We built out several different â€œfacetsâ€ that we score text on, including sentiment, emotion, vulgarity, tense, and currently, weâ€™re working on promotion detection.</p>
<p>While the technical side of NLP is hard, one of the hardest things was unexpected - defining the boundaries between the categories in question. Which words count as vulgar? Does anticipation entail positive emotions? Can a single tweet exude anger and fear at the same time despite being opposites according to Plutchik? In this article, weâ€™ll explore some of these questions and how we ended up answering them.</p>
<h2 id="emotion-facets">
  <span> Emotion Facets</span> <a href="#emotion-facets">ğŸ”—</a></h2>
<p>The eight emotions we set out to build a classification engine for are defined by <a href="https://www.6seconds.org/2020/08/11/plutchik-wheel-emotions/">Plutchikâ€™s wheel</a>:</p>
<ul>
<li>Anger</li>
<li>Fear</li>
<li>Joy</li>
<li>Sadness</li>
<li>Trust</li>
<li>Disgust</li>
<li>Anticipation</li>
<li>Surprise</li>
</ul>
<p>Our emotion detection is based on a probabilistic algorithm that requires training and test data from human-annotations. To get a high-quality dataset, we found early on that simply telling our annotators to categorize sentences as to whether or not the author was expressing â€œanticipationâ€ wasnâ€™t <em>nearly</em> enough instruction. Once we got down to the brass tacks of some specific examples, we found that <em>we didnâ€™t even agree internally</em> on classifications in many instances.</p>
<p>Letâ€™s look at some of the examples we had trouble with as a team and go over the conclusions we came to. If you have thoughts be sure to <a href="https://twitter.com/wagslane">tweet at me</a> and let me know what you think.</p>
<p>Keep in mind that the definition of anticipation according to <a href="https://languages.oup.com/google-dictionary-en/">Oxford</a> is â€œThe action of anticipating something; expectation or prediction.â€ In other words, weâ€™re looking for when someone is showing forethought, making a prediction, etc. Here are some examples we agreed on quickly as expressing â€œanticipationâ€:</p>
<ul>
<li>â€œI canâ€™t wait to go to the movie theater again!â€</li>
<li>â€œIâ€™m so excited for sports to come back, canâ€™t happen soon enough!â€</li>
<li>â€œTesla stock is way too high, itâ€™s going to tank soon.â€</li>
</ul>
<p>The first one we had trouble with was:</p>
<blockquote>
<p>Iâ€™m so nervous to go back to the office. Working from home has been great.</p>
</blockquote>
<p>Some of us had the idea that â€œanticipationâ€ carried a connotation of â€œbeing excitedâ€. In other words, you canâ€™t really anticipate something if you <em>donâ€™t want</em> it to happen. We eventually decided that this isnâ€™t a useful definition for several reasons. First, we already do sentiment classification separately, so baking positive sentiment into the anticipation facet isnâ€™t super helpful. Second, the opposite of anticipation in our emotion wheel is â€œsurpriseâ€. We all agreed that surprises can be good or bad. It stands to reason the surpiseâ€™s opposite, anticipation, should behave the same way.</p>
<p>The next problematic example arose a few days later:</p>
<blockquote>
<p>I donâ€™t know if Iâ€™m going to win</p>
</blockquote>
<p>One of my teammates made the point that this sentence expresses apprehension, which can be considered a form of anticipation. I played devilâ€™s advocate saying that â€œI donâ€™t knowâ€ is the polar opposite of a prediction, how can that be anticipation?</p>
<p>In the end, we found that we had to provide paragraph-long explanations of each category to our annotators, complete with examples of what is and isnâ€™t counted as a part of the category in question.</p>
<h2 id="vulgarity-detection">
  <span> Vulgarity Detection</span> <a href="#vulgarity-detection">ğŸ”—</a></h2>
<p>NSFW Disclaimer: <em>Iâ€™m going to talk about our vulgarity detection, and will need to say some naughty words. If you find that offensive turn back now!</em></p>
<p>The way the current iteration of our vulgarity engine works is to take a piece of text as input, for example:</p>
<blockquote>
<p>â€œWell hot damn those potatos hit the spot!â€</p>
</blockquote>
<p>And output a fractional score from 0-1 representing how likely the text is to contain vulgar text. For the above sample, it might be something like <code>.75</code> Which brings us to our first problem, <strong>what do <em>we</em> consider to be vulgar?</strong></p>
<p>According to one of my teammates â€œdamnâ€, â€œshitâ€ and â€œhellâ€ arenâ€™t bad words. However, while <em>he may not</em> consider them to be, <em><a href="https://www.cs.cmu.edu/~biglou/resources/bad-words.txt">many people do</a></em>. Weâ€™re left in the interesting position of trying to rank all the vulgar words. Here are some of the biggest issues we ran into with vulgarity:</p>
<h3 id="not-all-bad-words-are-created-equally">
  <span> Not all bad words are created equally</span> <a href="#not-all-bad-words-are-created-equally">ğŸ”—</a></h3>
<p>Most people would loosely agree with the following ranking from most vulgar -&gt; to least vulgar :</p>
<ul>
<li>Fuck</li>
<li>Bitch</li>
<li>Shit</li>
<li>Damn</li>
<li>Hell</li>
</ul>
<h3 id="religious--culture-specific">
  <span> Religious / Culture Specific</span> <a href="#religious--culture-specific">ğŸ”—</a></h3>
<p>However, problems arise when people of different religious beliefs examine the list. A Christian person may consider the following list accurate:</p>
<ul>
<li>Fuck</li>
<li>Bitch</li>
<li>Jesus Christ!</li>
<li>Oh my God!</li>
<li>Shit</li>
<li>Damn</li>
<li>Hell</li>
</ul>
<p>Whereas the atheist/agnostic/pagan may not consider â€œJesus Christ!â€ or â€œOh my God!â€ to deserve to be on the list at all.</p>
<h3 id="geographically-specific">
  <span> Geographically Specific</span> <a href="#geographically-specific">ğŸ”—</a></h3>
<p>If youâ€™re from England proper, you may also expect a few additional words:</p>
<ul>
<li>Fuck</li>
<li>Wanker</li>
<li>Bitch</li>
<li>Shit</li>
<li>Bloody</li>
<li>Damn</li>
<li>Hell</li>
</ul>
<p>In the end, we ended up mixing the concept of probability and intensity for the sake of simplicity and weâ€™ve found that our clients are happy with the result. For example, the presence of an intensely â€œbadâ€ word thatâ€™s recognized by basically everyone as vulgar will have a higher weight in the probability calculation than one which is weaker or not accepted by everyone as â€œbadâ€.</p>
<p><code>vulgarity_weight = intensity * acceptance</code></p>
<p>Once we started looking at everything as a fluid spectrum it became much easier to agree amongst ourselves what constitutes â€œvulgarityâ€. My coworker who claimed â€œshitâ€, â€œdamnâ€, and â€œhellâ€ arenâ€™t vulgar easily admitted that theyâ€™re <em>more vulgar</em> than trivial interjections like â€œcrapâ€, â€œdangâ€, or â€œheckâ€.</p>

<p>The project weâ€™re working on currently has also turned out to be a vague and difficult one to pin down. The goal is to classify text as to whether itâ€™s promotional or not, but weâ€™ve had a hard time defining what we want. For example, we all agreed quickly that the following we classify as :promotional&#34;:</p>
<ul>
<li>â€œWe are doing a sweet promo this week! Sign up for 20% offâ€</li>
<li>â€œOur new product just launched, be sure to check it outâ€</li>
<li>â€œGORGEOUS ğŸ˜ previously owned Gucci backpack for $1700ğŸ˜ğŸ˜ â­ï¸WE SHIP â­ï¸ Call the store to purchase 555-555-5555 ğŸ“²â€</li>
</ul>
<p>The following however posed an interesting problem:</p>
<blockquote>
<p>Do I want a $42 @gucci lipstick yes I doâ€¦. can I afford it right now No I cant but itâ€™s soooo good!!!!!!!</p>
</blockquote>
<p>While itâ€™s obviously promoting Gucci, it isnâ€™t actually soliciting direct action from the reader. Thereâ€™s no call to action. Is this a requirement of a solicitation as scored by Nuvi? Weâ€™re not sure yet - but weâ€™re figuring that out.</p>
  

<div>
  <h3>Find a problem with this article?</h3>
  <p><a target="_blank" href="https://github.com/bootdotdev/blog/issues">Report an issue on GitHub</a>
</p></div>
 
        </div></div>
        </section>
    </article>
</main>
</body>
</html>
